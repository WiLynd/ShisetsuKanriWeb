<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>メモ追加</title>
    <link rel="icon" type="image/png" href="./imgs/icons/ic-detail.svg" />
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="stylesheet" type="text/css" href="./fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./css/common.css">
    <link rel="stylesheet" type="text/css" href="./css/equipment_daily_check_detail.css">
    <link rel="stylesheet" type="text/css" href="./css/modal.css">
    <link rel="stylesheet" type="text/css" href="./css/util.css">
    <link rel="stylesheet" href="./fonts/fontawesome-free-5.15.4-web/css/all.css">
</head>

<body>
    <div id="backgroundPage">
        <div class="container-mainform">
            <div class="dropdown select-role">
                <div class="btn-menu btn-secondary dropdown-toggle" type="button" id="dropdownSelectRole"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <span class="text" id="userName"><i class="ic-dropdown far fa-user"></i><a id="name"></a></span>
                </div>
                <ul class="dropdown-menu" aria-labelledby="dropdownSelectRole">
                    <li>
                        <a class="dropdown-item scan-page" id="logoutOption">
                            <span class="text"><i class="ic-dropdown logout fas fa-sign-out-alt"></i>ログアウト</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="wrap-mainform">
                <span id="titleForm">
                    メモ追加
                </span>

                <p class="divider-text">
                    <span class="title-group">板金加工エリア　＞　折り曲げ機</span>
                </p>

                <div class="row content ed-v" style="align-items: normal">
                    <div class="col-6">
                        <div class="row content ed-v">
                            <div class="col-12">
                                <div class="form-group input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text mw135 text jc-c">管理番号</span>
                                    </div>

                                    <input type="text" class="form-control ta-l text t-ip" id="controlNumber"
                                        disabled />
                                </div>
                            </div>
                        </div>

                        <div class="row content confirmRow">
                            <div class="col-9" id="confirm">
                            </div>

                            <div class="col-3">

                                <div class="can-toggle can-toggle--size-large">
                                    <input id="status" type="checkbox">
                                    <label for="status">
                                        <div class="can-toggle__switch" data-checked="はい" data-unchecked="いいえ"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row content ed-v m-t-20">
                            <div class="col-12">
                                <div class="form-group input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text mw135 text jc-c">タイトル
                                        </span>
                                    </div>

                                    <input type="text" class="form-control ta-l text t-ip" id="comment" />
                                </div>
                            </div>
                        </div>

                        <div class="row content">
                            <div class="col-12" style="word-wrap: break-word;" id="kontentsu">

                            </div>
                        </div>
                    </div>

                    <div class="col-6" id="memoImg">
                        <div class="row content">
                            <div class="col-6 memo-img-l">
                                <img src="./imgs/mc-02.jpg" alt="">
                            </div>

                            <div class="col-6 memo-img-r">
                                <div class="wrapper">
                                    <button class="no-image" id="img-result"></button>
                                </div>
                            </div>
                        </div>

                        <div class="row content">
                            <div class="col-6 memo-img-l">

                            </div>

                            <div class="col-6 memo-img-r">
                                &nbsp;
                            </div>
                        </div>

                        <div class="row content">
                            <div class="col-6 memo-img-l">
                                &nbsp;
                            </div>

                            <div class="col-6 memo-img-r">
                                &nbsp;
                            </div>
                        </div>

                        <div class="button-area p-b-10">
                            <div class="row">
                                <div class="col-4">
                                    <button type="button" class="btn btn-default text-center" id="backBtn">戻る</button>
                                </div>
                                <div class="col-4">
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-default text-center"
                                        id="memoTsuikaBtn">登録</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- The Modal -->
            <div id="myModal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                    <!-- Modal image area -->
                    <div class="modal-image-area background-error-modal">
                        <span class="modal-close-button">X</span>
                        <img id="imgStatusModal" class="modal-image">
                    </div>

                    <!-- Modal message area -->
                    <div class="modal-message">
                        <div class="modal-message-area">
                            <span class="title-modal text">題名</span>
                            <span class="modal-message-detail text">メッセージ</span>
                        </div>

                        <div id="buttonAreaModal">
                            <button class="button-modal btn-common button-0" role="button"></button>
                            <button class="button-modal btn-common button-1" role="button"></button>
                            <button class="button-modal btn-common button-2" role="button"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/css/bootstrap-datepicker3.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css"
        integrity="sha256-rByPlHULObEjJ6XQxW/flG2r+22R5dKiAoef+aXWfik=" crossorigin="anonymous" />
    <script src="fonts/fontawesome-free-5.15.4-web/js/fontawesome.min.js"></script>
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- <script type="module" src="./js/equipment_daily_check_detail.js"></script> -->
    <script>
        /**
* MOVING TO ANOTHER PAGE
*/
        function movePage(page) {
            window.location.href = page;
        }

               /**
   * INITIALIZE MODAL
*/

function setupModal(status, title, message, textButton0, textButton1, textButton2, isClose) {
            // init view
            var modal = document.getElementById("myModal");
            var imageModal = document.getElementsByClassName("modal-image")[0];
            var titleModal = document.getElementsByClassName("title-modal")[0];
            var messageModal = document.getElementsByClassName("modal-message-detail")[0];
            var button0 = document.getElementsByClassName("button-0")[0];
            var button1 = document.getElementsByClassName("button-1")[0];
            var button2 = document.getElementsByClassName("button-2")[0];
            var closeButton = document.getElementsByClassName("modal-close-button")[0];

            // title and message
            if (title != null) {
                titleModal.innerHTML = title;
            }
            if (message != null) {
                messageModal.innerHTML = message;
            }

            // status
            if (status == "load") {
                titleModal.style.display = "none";
                imageModal.src = "./imgs/gif/gif_loading_data.gif";
            } else if (status == "success") {
                titleModal.style.display = "none";
                imageModal.src = "./imgs/gif/gif_success.gif";
            } else if (status == "error") {
                titleModal.style.display = "none";
                imageModal.src = "./imgs/gif/gif_fail.gif";
            } else if (status == "question") {
                titleModal.style.display = "none";
                imageModal.src = "./imgs/gif/gif_question.gif";
            } else if (status == "info") {
                titleModal.style.display = "none";
                imageModal.src = "./imgs/gif/gif_info.gif";
            }

            // button
            if (textButton0 != null) {
                button0.style.display = "block";
                button0.innerHTML = textButton0;
                button0.onclick = function () {
                    modal.style.display = "none";
                }
            } else {
                button0.style.display = "none";
            }

            if (textButton1 != null) {
                button1.style.display = "block";
                button1.innerHTML = textButton1;
                button1.onclick = function () {
                    modal.style.display = "none";
                }
            } else {
                button1.style.display = "none";
            }

            if (textButton2 != null) {
                button2.style.display = "block";
                button2.innerHTML = textButton2;
                button2.onclick = function () {
                    modal.style.display = "none";
                }
            } else {
                button2.style.display = "none";
            }

            if (isClose == true) {
                closeButton.style.display = "block";
                closeButton.onclick = function () {
                    modal.style.display = "none";
                }
            } else {
                closeButton.style.display = "none";
            }

            modal.style.display = "block";
        }

        /**
           * SET DATA ACTION
        */
        function setDataDetail() {
            document.getElementById("controlNumber").value = sessionStorage.getItem("controlNumber");
            document.getElementById("confirm").innerHTML = sessionStorage.getItem("inspectionDetail");
            document.getElementById("comment").value = "溶接機から異音あり";
            document.getElementById("kontentsu").innerHTML = "調整器から小さく「シューシュー」という音が聞こえる <br>" +
                "ここのところガスの減りが速い気がしていた。<br>" +
                "日常点検をした方がよいかもしれない。";
            if (sessionStorage.getItem("status") == "いいえ") {
                document.getElementById("status").setAttribute("checked", "");
            }
        }

        /**
           * UPLOAD PICTURE ACTION
        */
        function uploadPicture() {
            var uploader = document.createElement('input'),
                image = document.getElementById('img-result');

            uploader.type = 'file';
            uploader.accept = 'image/*';
            uploader.click();
            uploader.onchange = function () {
                var reader = new FileReader();
                reader.onload = function (evt) {
                    image.classList.remove('no-image');
                    image.style.backgroundImage = 'url(' + evt.target.result + ')';
                    var request = {
                        itemtype: 'test 1',
                        brand: 'test 2',
                        images: [{
                            data: evt.target.result
                        }]
                    };
                }
                reader.readAsDataURL(uploader.files[0]);
            }
        }

        /**
           * ONCLICK ACTION
        */
        function onClickAction() {
            document.getElementById("logoutOption").onclick = function () {
                movePage('./login.html')
            }

            document.getElementById("backBtn").onclick = function () {
                movePage("./daily_check_list.html");
            }

            document.getElementById("memoTsuikaBtn").onclick = function () {
                if (document.getElementById("status").hasAttribute("checked")) {
                    sessionStorage.setItem("status", "いいえ");
                }
                else {
                    sessionStorage.setItem("status", "はい");
                }

                setupModal("success", null, "データ保存に成功しました。", null, "OK", null, false);
                document.getElementById("buttonAreaModal").onclick = function () {
                    movePage("./daily_check_list.html");
                }
            }

            document.getElementById("img-result").onclick = function () {
                uploadPicture();
            }
        }

        /**
           * ONLOAD ACTION
        */
        function onLoadAction() {
            onClickAction();
            setDataDetail();
        }

        window.onload = onLoadAction;
    </script>
</body>

</html>